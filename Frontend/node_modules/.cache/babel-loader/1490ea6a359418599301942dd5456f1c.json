{"ast":null,"code":"var _jsxFileName = \"/Users/jugal/Documents/Root/University/Web Dev CS 5610/Project/Front-end/wbdv-sp20-flight-project-client-react/src/components/Profile/ProfileComponent.js\";\nimport React from \"react\";\nimport HeaderComponent from \"../Headers/HeaderComponent\";\nimport { deleteUser, fetchProfile } from \"../../services/services\";\nimport './profile-styles.css';\nimport ProfileContentComponent from \"./ProfileContentComponent\";\nimport { TicketComponent } from \"./TicketComponent\";\nexport default class ProfileComponent extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: {\n        email: '',\n        first: '',\n        last: '',\n        type: '',\n        ticketsBooked: []\n      },\n      login: false\n    };\n\n    this.flexTable = () => {\n      if (window.innerWidth < 768) {\n        window.$(\".table-responsive-stack\").each(function (i) {\n          window.$(this).find(\".table-responsive-stack-thead\").show();\n          window.$(this).find('thead').hide();\n        }); // window is less than 768px\n      } else {\n        window.$(\".table-responsive-stack\").each(function (i) {\n          window.$(this).find(\".table-responsive-stack-thead\").hide();\n          window.$(this).find('thead').show();\n        });\n      }\n    };\n\n    this.deleteAccount = () => {\n      if (window.confirm('Are you sure?')) {\n        // console.log(this.state.user._id)\n        deleteUser(this.state.user._id).then(r => {\n          if (r) {\n            alert(`Your account with ${r.email} has been deleted!`);\n            this.props.history.push('/');\n          }\n        });\n      }\n    };\n  }\n\n  componentDidMount() {\n    fetchProfile().then(user => {\n      if (user) {\n        this.setState({\n          user: user,\n          login: true\n        });\n      } else {\n        this.props.history.push('/');\n      }\n    }); //Todo\n\n    /*  // for responsive tables\n        // inspired by http://jsfiddle.net/arunpjohny/564Lxosz/1/\n        window.$('.table-responsive-stack').find(\"th\").each(function (i) {\n          window.$('.table-responsive-stack td:nth-child(' + (i + 1) + ')').prepend(\n              '<span class=\"table-responsive-stack-thead\">' + window.$(this).text()\n              + ':</span> ');\n          window.$('.table-responsive-stack-thead').hide();\n        });\n        window.$('.table-responsive-stack').each(function () {\n          let thCount = window.$(this).find(\"th\").length;\n          let rowGrow = 100 / thCount + '%';\n          //console.log(rowGrow);\n          window.$(this).find(\"th, td\").css('flex-basis', rowGrow);\n        });\n        this.flexTable();\n        window.addEventListener(\"resize\", this.flexTable);*/\n  }\n\n  render() {\n    let {\n      _id,\n      ticketsBooked,\n      created,\n      ...userDetails\n    } = this.state.user;\n    console.log('userdetails', this.userDetails);\n    return React.createElement(React.Fragment, null, React.createElement(HeaderComponent, {\n      user: this.state.user,\n      login: this.state.login,\n      history: this.props.history,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"container container-background\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row pt-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-10\",\n      style: {\n        \"display\": \"inline\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, \"Hello \", this.state.user.first, \"!\")), React.createElement(\"div\", {\n      className: \"col-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-link color-red float-right\",\n      onClick: this.deleteAccount,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, \"Delete Account \", React.createElement(\"i\", {\n      className: \"fas fa-times\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    })))), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \"My Details:\"), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, console.log('usd', this.userDetails), Object.keys(this.userDetails).map(key => React.createElement(ProfileContentComponent, {\n      key: key,\n      title: key,\n      userDetail: this.userDetails[key],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"row pt-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"Booking History:\"))), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row pl-3 pr-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, this.state.user.ticketsBooked.map(ticket => React.createElement(TicketComponent, {\n      ticket: ticket,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    })))));\n  }\n\n}","map":{"version":3,"sources":["/Users/jugal/Documents/Root/University/Web Dev CS 5610/Project/Front-end/wbdv-sp20-flight-project-client-react/src/components/Profile/ProfileComponent.js"],"names":["React","HeaderComponent","deleteUser","fetchProfile","ProfileContentComponent","TicketComponent","ProfileComponent","Component","state","user","email","first","last","type","ticketsBooked","login","flexTable","window","innerWidth","$","each","i","find","show","hide","deleteAccount","confirm","_id","then","r","alert","props","history","push","componentDidMount","setState","render","created","userDetails","console","log","Object","keys","map","key","ticket"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport HeaderComponent from \"../Headers/HeaderComponent\";\nimport {deleteUser, fetchProfile} from \"../../services/services\";\nimport './profile-styles.css';\nimport ProfileContentComponent from \"./ProfileContentComponent\";\nimport {TicketComponent} from \"./TicketComponent\";\n\nexport default class ProfileComponent extends React.Component {\n\n  \n\n  state = {\n    user: {\n      email: '',\n      first: '',\n      last: '',\n      type: '',\n      ticketsBooked: []\n    },\n    login: false\n  };\n\n  componentDidMount() {\n\n    \n    fetchProfile().then(user => {\n      if (user) {\n        this.setState({\n          user: user,\n          login: true\n        })\n      } else {\n        this.props.history.push('/')\n      }\n    });\n    //Todo\n    /*  // for responsive tables\n        // inspired by http://jsfiddle.net/arunpjohny/564Lxosz/1/\n        window.$('.table-responsive-stack').find(\"th\").each(function (i) {\n          window.$('.table-responsive-stack td:nth-child(' + (i + 1) + ')').prepend(\n              '<span class=\"table-responsive-stack-thead\">' + window.$(this).text()\n              + ':</span> ');\n          window.$('.table-responsive-stack-thead').hide();\n        });\n        window.$('.table-responsive-stack').each(function () {\n          let thCount = window.$(this).find(\"th\").length;\n          let rowGrow = 100 / thCount + '%';\n          //console.log(rowGrow);\n          window.$(this).find(\"th, td\").css('flex-basis', rowGrow);\n        });\n        this.flexTable();\n        window.addEventListener(\"resize\", this.flexTable);*/\n  }\n\n  flexTable = () => {\n    if ((window.innerWidth < 768)) {\n      window.$(\".table-responsive-stack\").each(function (i) {\n        window.$(this).find(\".table-responsive-stack-thead\").show();\n        window.$(this).find('thead').hide();\n      });\n\n      // window is less than 768px\n    } else {\n      window.$(\".table-responsive-stack\").each(function (i) {\n        window.$(this).find(\".table-responsive-stack-thead\").hide();\n        window.$(this).find('thead').show();\n      });\n    }\n  };\n\n  deleteAccount = () => {\n    if(window.confirm('Are you sure?')){\n      // console.log(this.state.user._id)\n      deleteUser(this.state.user._id).then(r=>{\n        if(r){\n          alert(`Your account with ${r.email} has been deleted!`)\n          this.props.history.push('/')\n        }\n      })\n    }\n  };\n\n  \n  render() {\n   \n    let {_id, ticketsBooked, created, ...userDetails} = this.state.user;\n    console.log('userdetails' , this.userDetails)\n\n    return (\n        <>\n          <HeaderComponent\n              user={this.state.user}\n              login={this.state.login}\n              history={this.props.history}\n          />\n          <div className='container container-background'>\n            <div className='row pt-3'>\n              <div className='col-10' style={{\"display\": \"inline\"}}>\n                <h2>Hello {this.state.user.first}!</h2>\n              </div>\n              <div className='col-2'>\n                <button className='btn btn-link color-red float-right'\n                onClick={this.deleteAccount}\n                >Delete\n                  Account <i className=\"fas fa-times\"/></button>\n              </div>\n            </div>\n            <hr/>\n            <h4>My Details:</h4>\n           <div className='row'>\n             {console.log('usd' ,this.userDetails)}\n              {Object.keys(this.userDetails).map(key =>\n                  <ProfileContentComponent\n                      key={key}\n                      title={key}\n                      userDetail={this.userDetails[key]}\n                  />\n              )}\n            </div>\n            <div className='row pt-3'>\n              <div className='col-12'>\n                <h4>Booking History:</h4>\n              </div>\n            </div>\n            <hr/>\n            <div className='row pl-3 pr-3'>\n              {this.state.user.ticketsBooked.map(ticket =>\n                  <TicketComponent\n                      ticket={ticket}/>\n              )}\n            </div>\n          </div>\n        </>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}