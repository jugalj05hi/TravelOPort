{"ast":null,"code":"var _jsxFileName = \"/Users/jugal/Documents/Root/University/Web Dev CS 5610/Project/Front-end/wbdv-sp20-flight-project-client-react/src/components/FlightDetails/FlightDetailComponent.js\";\nimport React from \"react\";\nimport { bookTicket, fetchProfile } from \"../../services/services\";\nimport HeaderComponent from \"../Headers/HeaderComponent\";\nexport default class FlightDetailComponent extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.confirmReservation = (details, data) => {\n      const bookingDetails = { ...details,\n        ...data\n      };\n      this.setState({\n        user: { ...this.state.user,\n          ticketsBooked: [...this.state.user.ticketsBooked, bookingDetails]\n        }\n      }, () => {\n        bookTicket(this.state.user).then(r => {\n          alert(\"Ticket booked successfully!!\");\n          this.props.history.push('/search');\n        });\n      }); // TODO call service\n\n      console.log(bookingDetails);\n      console.log(this.props.history);\n    };\n\n    this.state = {\n      flight: \"\",\n      user: {\n        email: '',\n        first: '',\n        last: '',\n        type: '',\n        ticketsBooked: []\n      },\n      login: false\n    };\n  }\n\n  componentDidMount() {\n    fetchProfile().then(user => {\n      if (user) {\n        let data = JSON.parse(localStorage.getItem('flight'));\n        this.setState({\n          flight: data,\n          user: user,\n          login: true\n        });\n      } else {\n        this.props.history.push('/');\n      }\n    });\n  }\n\n  render() {\n    let {\n      id,\n      itineraries,\n      instantTicketingRequired,\n      price,\n      pricingOptions,\n      source,\n      travelerPricings,\n      validatingAirlineCodes,\n      ...details\n    } = this.state.flight;\n    let data = JSON.parse(localStorage.getItem('data'));\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(HeaderComponent, {\n      login: this.state.login,\n      history: this.props.history,\n      user: this.state.user,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"container container-background\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      className: \"ml-3 mt-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \"User Details\")), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"table table-bordered mr-3 ml-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"First Name\"), React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, \"Last Name\"), React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"Email\"), React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \"Type\")), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, this.state.user.first), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, this.state.user.last), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, this.state.user.email), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, this.state.user.type))))), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      className: \"ml-3 \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"Flight Details\")), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: \"ml-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, data.carrier)), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"table table-bordered mr-3 ml-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \"Departure\"), React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \"Departure Time (Local)\"), React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, \"Arrival\"), React.createElement(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \"Arrival Time (Local)\")), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      scope: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, data.departure, \", \", data.depCity), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, data.depTime), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, data.arrival, \", \", data.arrivalCity), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, data.arrivalTime)), React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      scope: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"Book by\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"No. of Seats\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, \"One-way\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"Price\")), React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      scope: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, details.lastTicketingDate), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, details.numberOfBookableSeats), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, details.oneWay), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"$ \", data.price)), React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      scope: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Duration\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"Cabin Class\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"Baggage\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"Price\")), React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      scope: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, data.duration), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"Economy\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"Check-in\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"$ \", data.price))))), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row pb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-dark float-right\",\n      onClick: () => this.confirmReservation(details, data),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, \"Book\")))));\n  }\n\n}","map":{"version":3,"sources":["/Users/jugal/Documents/Root/University/Web Dev CS 5610/Project/Front-end/wbdv-sp20-flight-project-client-react/src/components/FlightDetails/FlightDetailComponent.js"],"names":["React","bookTicket","fetchProfile","HeaderComponent","FlightDetailComponent","Component","constructor","props","confirmReservation","details","data","bookingDetails","setState","user","state","ticketsBooked","then","r","alert","history","push","console","log","flight","email","first","last","type","login","componentDidMount","JSON","parse","localStorage","getItem","render","id","itineraries","instantTicketingRequired","price","pricingOptions","source","travelerPricings","validatingAirlineCodes","carrier","departure","depCity","depTime","arrival","arrivalCity","arrivalTime","lastTicketingDate","numberOfBookableSeats","oneWay","duration"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {bookTicket, fetchProfile} from \"../../services/services\";\nimport HeaderComponent from \"../Headers/HeaderComponent\";\n\nexport default class FlightDetailComponent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      flight: \"\",\n      user: {\n        email: '',\n        first: '',\n        last: '',\n        type: '',\n        ticketsBooked: []\n      },\n      login: false\n    }\n  }\n\n  componentDidMount() {\n    fetchProfile().then(user => {\n      if (user) {\n        let data = JSON.parse(localStorage.getItem('flight'));\n        this.setState({\n          flight: data,\n          user: user,\n          login: true\n        })\n      }else{\n        this.props.history.push('/')\n      }\n    });\n  }\n\n  confirmReservation = (details, data) => {\n    const bookingDetails = {...details, ...data};\n    this.setState({\n      user: {\n        ...this.state.user,\n        ticketsBooked: [...this.state.user.ticketsBooked, bookingDetails]\n      }\n    },()=>{\n      bookTicket(this.state.user).then(r=>{\n        alert(\"Ticket booked successfully!!\")\n        this.props.history.push('/search')\n      })\n    });\n\n    // TODO call service\n    console.log(bookingDetails)\n    console.log(this.props.history)\n  };\n\n  render() {\n\n    let {id, itineraries, instantTicketingRequired, price, pricingOptions, source, travelerPricings, validatingAirlineCodes, ...details} = this.state.flight;\n    let data = JSON.parse(localStorage.getItem('data'));\n\n    return (\n        <div>\n          <HeaderComponent\n              login={this.state.login}\n              history={this.props.history}\n              user={this.state.user}\n          />\n          <div className=\"container container-background\">\n            <div className='row'>\n              <h5 className='ml-3 mt-3'>User Details</h5>\n            </div>\n            <div className=\"row\">\n              <table className=\"table table-bordered mr-3 ml-3\">\n                <tr>\n                  <th scope=\"col\">First Name</th>\n                  <th scope=\"col\">Last Name</th>\n                  <th scope=\"col\">Email</th>\n                  <th scope=\"col\">Type</th>\n                </tr>\n                <tbody>\n                <tr>\n                  <td>{this.state.user.first}</td>\n                  <td>{this.state.user.last}</td>\n                  <td>{this.state.user.email}</td>\n                  <td>{this.state.user.type}</td>\n                </tr>\n                </tbody>\n              </table>\n            </div>\n            <div className='row'>\n              <h5 className='ml-3 '>Flight Details</h5>\n            </div>\n            <hr/>\n            <div className=\"row\">\n              <h3 className='ml-3'>{data.carrier}</h3>\n            </div>\n            <div className='row'>\n              <table className=\"table table-bordered mr-3 ml-3\">\n                <tr>\n                  <th scope=\"col\">Departure</th>\n                  <th scope=\"col\">Departure Time (Local)</th>\n                  <th scope=\"col\">Arrival</th>\n                  <th scope=\"col\">Arrival Time (Local)</th>\n                </tr>\n                <tbody>\n                <tr>\n                  <td scope=\"row\">{data.departure}, {data.depCity}</td>\n                  <td>{data.depTime}</td>\n                  <td>{data.arrival}, {data.arrivalCity}</td>\n                  <td>{data.arrivalTime}</td>\n                </tr>\n                <tr>\n                  <th scope=\"row\">Book by</th>\n                  <th>No. of Seats</th>\n                  <th>One-way</th>\n                  <th>Price</th>\n                </tr>\n                <tr>\n                  <td scope=\"row\">{details.lastTicketingDate}</td>\n                  <td>{details.numberOfBookableSeats}</td>\n                  <td>{details.oneWay}</td>\n                  <td>$ {data.price}</td>\n                </tr>\n                <tr>\n                  <th scope=\"row\">Duration</th>\n                  <th>Cabin Class</th>\n                  <th>Baggage</th>\n                  <th>Price</th>\n                </tr>\n                <tr>\n                  <td scope=\"row\">{data.duration}</td>\n                  <td>Economy</td>\n                  <td>Check-in</td>\n                  <td>$ {data.price}</td>\n                </tr>\n                </tbody>\n              </table>\n            </div>\n            <hr/>\n            <div className='row pb-3'>\n              <div className='col-12'>\n                <button className='btn btn-dark float-right'\n                        onClick={() => this.confirmReservation(details, data)}\n                >Book\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}