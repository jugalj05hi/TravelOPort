{"ast":null,"code":"var _jsxFileName = \"/Users/jugal/Documents/Root/University/Web Dev CS 5610/Project/Front-end/wbdv-sp20-flight-project-client-react/src/components/Register/RegistrationContent.js\";\nimport React from \"react\";\nimport { registerUser } from \"../../services/services\";\nimport crypto from 'crypto-js'; // import $ from 'jquery';\n\nclass RegistrationContent extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: {\n        // username: \"\",\n        first: \"\",\n        last: \"\",\n        email: \"\",\n        type: \"USER\",\n        password: \"\"\n      },\n      confirmPassword: \"\",\n      match: \"\"\n    };\n\n    this.handlePassword = e => {\n      this.setState({\n        user: { ...this.state.user,\n          password: e.target.value\n        }\n      }, () => this.validatePassword());\n    };\n\n    this.handleConfirmPassword = e => {\n      this.setState({\n        confirmPassword: e.target.value\n      }, () => this.validatePassword());\n    };\n\n    this.validatePassword = () => {\n      if (!/^\\s*$/.test(this.state.user.password) && this.state.user.password === this.state.confirmPassword) {\n        this.setState({\n          match: true\n        });\n      } else {\n        this.setState({\n          match: false\n        });\n      }\n    };\n\n    this.validate = () => {\n      return this.state.user.first && this.state.user.last && this.state.user.email && this.state.user.password;\n    };\n\n    this.register = e => {\n      e.preventDefault(); // encryption\n\n      let encryptedPassword = crypto.AES.encrypt(JSON.stringify(this.state.user.password), 'DEFcon777').toString();\n      console.log(encryptedPassword); // decryption\n\n      /*let bytes = crypto.AES.decrypt(encryptedPassword, 'DEFcon777');\n      let decryptedData = JSON.parse(bytes.toString(crypto.enc.Utf8));\n      console.log('decryptedData',decryptedData)*/\n\n      if (this.validate()) {\n        this.setState({\n          user: { ...this.state.user,\n            password: encryptedPassword\n          }\n        }, () => {\n          registerUser(this.state.user).then(user => {\n            console.log(user);\n            window.$('#registrationModal').modal('toggle');\n            this.props.history.push('/user-dashboard');\n          });\n          return false; // TODO clear state\n        });\n      } else {\n        alert('All fields are mandatory!!');\n      }\n    };\n  }\n\n  render() {\n    return React.createElement(\"form\", {\n      className: \"wbdv-dtl\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"first\",\n      className: \"col-sm-2 col-form-label text-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"First \"), React.createElement(\"div\", {\n      className: \"col-sm-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"first\",\n      placeholder: \"first name\",\n      value: this.state.user.first,\n      onChange: e => this.setState({\n        user: { ...this.state.user,\n          first: e.target.value\n        }\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"form-group row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"first\",\n      className: \"col-sm-2 col-form-label text-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"Last \"), React.createElement(\"div\", {\n      className: \"col-sm-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"first\",\n      placeholder: \"last name\",\n      value: this.state.user.last,\n      onChange: e => this.setState({\n        user: { ...this.state.user,\n          last: e.target.value\n        }\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"form-group row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"email\",\n      className: \"col-sm-2 col-form-label text-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"Email \"), React.createElement(\"div\", {\n      className: \"col-sm-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"email\",\n      type: \"email\",\n      placeholder: \"someone@something.com\",\n      value: this.state.user.email,\n      onChange: e => this.setState({\n        user: { ...this.state.user,\n          email: e.target.value\n        }\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"form-group row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"type\",\n      className: \"col-sm-2 col-form-label text-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, \"Type \"), React.createElement(\"div\", {\n      className: \"col-sm-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      className: \"form-control\",\n      id: \"type\",\n      placeholder: \"someone@something.com\",\n      value: this.state.user.type,\n      onChange: e => this.setState({\n        user: { ...this.state.user,\n          type: e.target.value\n        }\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      className: \"form-control\",\n      value: \"USER\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, \"User\"), React.createElement(\"option\", {\n      className: \"form-control\",\n      value: \"AGENT\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \"Agent\"), React.createElement(\"option\", {\n      className: \"form-control\",\n      value: \"ADMIN\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, \"Admin\")), React.createElement(\"p\", {\n      className: \"mb-0\",\n      style: {\n        \"fontSize\": \"0.7rem\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, \"Agent types will require admin approvals and may take some time. \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }), \"Admin types will require approval from present admin.\"))), React.createElement(\"div\", {\n      className: \"form-group row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"password\",\n      className: \"col-sm-2 col-form-label text-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, \"Password \"), React.createElement(\"div\", {\n      className: \"col-sm-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      id: \"password\",\n      placeholder: \"password\",\n      value: this.state.user.password,\n      onChange: this.handlePassword,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"form-group row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"password\",\n      className: \"col-sm-2 col-form-label text-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, \"Verify Password \"), React.createElement(\"div\", {\n      className: \"col-sm-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      id: \"verifyPassword\",\n      placeholder: \"retype password\",\n      value: this.state.confirmPassword,\n      onChange: this.handleConfirmPassword,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }), this.state.match && React.createElement(\"p\", {\n      className: \"color-green mb-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, \"passwords match!!\"), !this.state.match && React.createElement(\"p\", {\n      className: \"red mb-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, \"passwords do not match!!\"))), React.createElement(\"div\", {\n      className: \"form-group row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"col-sm-2 col-form-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"col-sm-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-success btn-block\",\n      onClick: this.register,\n      disabled: !this.state.match,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, \"Register\"), React.createElement(\"p\", {\n      className: \"red mb-0\",\n      style: {\n        \"fontSize\": \"0.7rem\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, \"*All fields are mandatory\"))));\n  }\n\n}\n\nexport default RegistrationContent;","map":{"version":3,"sources":["/Users/jugal/Documents/Root/University/Web Dev CS 5610/Project/Front-end/wbdv-sp20-flight-project-client-react/src/components/Register/RegistrationContent.js"],"names":["React","registerUser","crypto","RegistrationContent","Component","state","user","first","last","email","type","password","confirmPassword","match","handlePassword","e","setState","target","value","validatePassword","handleConfirmPassword","test","validate","register","preventDefault","encryptedPassword","AES","encrypt","JSON","stringify","toString","console","log","then","window","$","modal","props","history","push","alert","render"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {registerUser} from \"../../services/services\";\nimport crypto from 'crypto-js'\n\n// import $ from 'jquery';\n\nclass RegistrationContent extends React.Component {\n\n  state = {\n    user: {\n      // username: \"\",\n      first: \"\",\n      last: \"\",\n      email: \"\",\n      type: \"USER\",\n      password: \"\"\n    },\n    confirmPassword: \"\",\n    match: \"\"\n  };\n\n  handlePassword = (e) => {\n    this.setState({\n      user: {\n        ...this.state.user,\n        password: e.target.value\n      }\n    }, () => this.validatePassword())\n  };\n\n  handleConfirmPassword = (e) => {\n\n    this.setState({\n      confirmPassword: e.target.value\n    }, () => this.validatePassword())\n  };\n\n  validatePassword = () => {\n    if (!(/^\\s*$/.test(this.state.user.password)) && this.state.user.password\n        === this.state.confirmPassword) {\n      this.setState({\n        match: true\n      })\n    } else {\n      this.setState({\n        match: false\n      })\n    }\n  };\n\n  validate = () => {\n    return (this.state.user.first && this.state.user.last\n        && this.state.user.email && this.state.user.password);\n  };\n\n  register = (e) => {\n    e.preventDefault();\n    // encryption\n    let encryptedPassword = crypto.AES.encrypt(\n        JSON.stringify(this.state.user.password), 'DEFcon777').toString();\n    console.log(encryptedPassword);\n    // decryption\n    /*let bytes = crypto.AES.decrypt(encryptedPassword, 'DEFcon777');\n    let decryptedData = JSON.parse(bytes.toString(crypto.enc.Utf8));\n    console.log('decryptedData',decryptedData)*/\n    if (this.validate()) {\n      this.setState({\n        user: {\n          ...this.state.user,\n          password: encryptedPassword\n        }\n      }, () => {\n        registerUser(this.state.user).then(user => {\n          console.log(user);\n          window.$('#registrationModal').modal('toggle');\n          this.props.history.push('/user-dashboard')\n        });\n        return false\n        // TODO clear state\n      });\n    } else {\n      alert('All fields are mandatory!!')\n    }\n  };\n\n  render() {\n\n    return (\n        <form className=\"wbdv-dtl\">\n          <div className=\"form-group row\">\n            <label htmlFor=\"first\"\n                   className=\"col-sm-2 col-form-label text-left\">\n              First </label>\n            <div className=\"col-sm-10\">\n              <input className=\"form-control\"\n                     id=\"first\"\n                     placeholder=\"first name\"\n                     value={this.state.user.first}\n                     onChange={(e) =>\n                         this.setState({\n                           user: {\n                             ...this.state.user,\n                             first: e.target.value\n                           }\n                         })}\n              />\n            </div>\n          </div>\n          <div className=\"form-group row\">\n            <label htmlFor=\"first\"\n                   className=\"col-sm-2 col-form-label text-left\">\n              Last </label>\n            <div className=\"col-sm-10\">\n              <input className=\"form-control\"\n                     id=\"first\"\n                     placeholder=\"last name\"\n                     value={this.state.user.last}\n                     onChange={(e) => this.setState({\n                       user: {\n                         ...this.state.user,\n                         last: e.target.value\n                       }\n                     })}\n              />\n            </div>\n          </div>\n          <div className=\"form-group row\">\n            <label htmlFor=\"email\"\n                   className=\"col-sm-2 col-form-label text-left\">\n              Email </label>\n            <div className=\"col-sm-10\">\n              <input className=\"form-control\"\n                     id=\"email\"\n                     type=\"email\"\n                     placeholder=\"someone@something.com\"\n                     value={this.state.user.email}\n                     onChange={(e) => this.setState({\n                       user: {\n                         ...this.state.user,\n                         email: e.target.value\n                       }\n                     })}\n              />\n            </div>\n          </div>\n          <div className=\"form-group row\">\n            <label htmlFor=\"type\" className=\"col-sm-2 col-form-label text-left\">\n              Type </label>\n            <div className=\"col-sm-10\">\n              <select className=\"form-control\"\n                      id=\"type\"\n                      placeholder=\"someone@something.com\"\n                      value={this.state.user.type}\n                      onChange={(e) => this.setState({\n                        user: {\n                          ...this.state.user,\n                          type: e.target.value\n                        }\n                      })}>\n                <option className=\"form-control\"\n                        value=\"USER\">User\n                </option>\n                <option className=\"form-control\"\n                        value=\"AGENT\">Agent\n                </option>\n                <option className=\"form-control\"\n                        value=\"ADMIN\">Admin\n                </option>\n              </select>\n              <p className='mb-0' style={{\"fontSize\": \"0.7rem\"}}>Agent types\n                will require admin approvals and may take some time. <br/>\n                Admin types will require approval from present admin.\n              </p>\n            </div>\n          </div>\n          <div className=\"form-group row\">\n            <label htmlFor=\"password\"\n                   className=\"col-sm-2 col-form-label text-left\">\n              Password </label>\n            <div className=\"col-sm-10\">\n              <input type=\"password\"\n                     className=\"form-control\"\n                     id=\"password\"\n                     placeholder=\"password\"\n                     value={this.state.user.password}\n                     onChange={this.handlePassword}\n              />\n            </div>\n          </div>\n          <div className=\"form-group row\">\n            <label htmlFor=\"password\"\n                   className=\"col-sm-2 col-form-label text-left\">\n              Verify Password </label>\n            <div className=\"col-sm-10\">\n              <input type=\"password\"\n                     className=\"form-control\"\n                     id=\"verifyPassword\"\n                     placeholder=\"retype password\"\n                     value={this.state.confirmPassword}\n                     onChange={this.handleConfirmPassword}\n              />\n              {this.state.match &&\n              <p className=\"color-green mb-0\">passwords match!!</p>\n              }\n              {!this.state.match &&\n              <p className=\"red mb-0\">passwords do not match!!</p>\n              }\n            </div>\n          </div>\n          <div className=\"form-group row\">\n            <label className=\"col-sm-2 col-form-label\"/>\n            <div className=\"col-sm-10\">\n              <button\n                  className=\"btn btn-success btn-block\"\n                  onClick={this.register}\n                  disabled={!this.state.match}>\n                Register\n              </button>\n              <p className=\"red mb-0\" style={{\"fontSize\": \"0.7rem\"}}>*All fields\n                are mandatory</p>\n            </div>\n          </div>\n        </form>\n    )\n  }\n}\n\nexport default RegistrationContent\n"]},"metadata":{},"sourceType":"module"}